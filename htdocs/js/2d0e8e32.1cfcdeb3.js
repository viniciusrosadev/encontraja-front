(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e8e32"],{"8ad7":function(i,e,a){"use strict";a.r(e);var o=function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"400px"}},[i.cadastrado?a("q-form",{staticClass:"q-gutter-md",on:{submit:i.enviarAnuncio}},[a("q-input",{attrs:{filled:"",label:"Título do anúncio *","lazy-rules":"",rules:[function(i){return i&&i.length>0||"Digite um título"}]},model:{value:i.tituloAnuncio,callback:function(e){i.tituloAnuncio=e},expression:"tituloAnuncio"}}),a("q-expansion-item",{attrs:{icon:"perm_identity",label:"Fotos do anúncio",align:"center"},model:{value:i.fotosAnuncioExpandido,callback:function(e){i.fotosAnuncioExpandido=e},expression:"fotosAnuncioExpandido"}},[a("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{label:"Selecionar imagens do anúncio",multiple:"",accept:".jpg, .png, .jpeg, .gif, image/*"},on:{added:i.adicionarImagens,removed:i.removerImagem},scopedSlots:i._u([{key:"header",fn:function(e){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[e.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):i._e(),a("div",{staticClass:"col"},[a("div",{staticClass:"q-uploader__title"},[i._v("Fotos do anúncio")]),a("div",{staticClass:"q-uploader__subtitle"},[i._v(i._s(e.uploadSizeLabel))])]),e.queuedFiles.length>0?a("q-btn",{attrs:{icon:"clear_all",round:"",dense:"",flat:""},on:{click:e.removeQueuedFiles}},[a("q-tooltip",[i._v("Limpar tudo")])],1):i._e(),e.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box",round:"",dense:"",flat:""}},[a("q-uploader-add-trigger"),a("q-tooltip",[i._v("Escolha os arquivos")])],1):i._e()],1)]}}],null,!1,4011914272)})],1),a("q-expansion-item",{attrs:{icon:"perm_identity",label:"Configurações do anúncio",align:"center"},model:{value:i.configuracoesAnuncioExpandido,callback:function(e){i.configuracoesAnuncioExpandido=e},expression:"configuracoesAnuncioExpandido"}},[a("br"),a("q-input",{attrs:{filled:"",label:"Data inicial de exibição *",hint:"Quando o anúncio vai começar a ser exibido.","stack-label":"",mask:"##/##/####"},scopedSlots:i._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD/MM/YYYY"},on:{input:function(){return i.$refs.qDateProxy.hide()}},model:{value:i.exibirData,callback:function(e){i.exibirData=e},expression:"exibirData"}})],1)],1)]},proxy:!0}],null,!1,539053082),model:{value:i.exibirData,callback:function(e){i.exibirData=e},expression:"exibirData"}}),a("br"),a("q-input",{attrs:{filled:"",type:"textarea",label:"Descrição do anúncio"},model:{value:i.descricao,callback:function(e){i.descricao=e},expression:"descricao"}})],1),a("q-expansion-item",{attrs:{icon:"perm_identity",label:"Contato do anúncio",align:"center"},model:{value:i.contatoExpandido,callback:function(e){i.contatoExpandido=e},expression:"contatoExpandido"}},[a("br"),a("q-card",[a("q-item",[i.telefone||i.emailContato?i._e():a("q-item-section",[a("q-btn",{attrs:{label:"Adicionar contato"},on:{click:function(e){i.adicionaContatoDialog=!0}}})],1),i.telefone||i.emailContato?a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{icon:"close"},on:{click:i.eliminarContato}})],1):i._e(),i.telefone&&!i.emailContato?a("q-item-section",[i._v("\n                Telefone/Celular:\n              ")]):i._e(),i.telefone&&!i.emailContato?a("q-item-section",[i._v("\n                "+i._s(this.telefone)+"\n              ")]):i._e(),!i.telefone&&i.emailContato?a("q-item-section",[i._v("\n                Email:\n              ")]):i._e(),!i.telefone&&i.emailContato?a("q-item-section",[i._v("\n                "+i._s(this.emailContato)+"\n              ")]):i._e()],1)],1),a("br")],1),a("q-dialog",{attrs:{persistent:"",maximized:i.dialogoTelaCheia,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:i.adicionaContatoDialog,callback:function(e){i.adicionaContatoDialog=e},expression:"adicionaContatoDialog"}},[a("q-card",{staticClass:"bg-primary text-white"},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[i._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h4"},[i._v("Adicionar contato")])]),a("q-card-section",[a("q-select",{staticClass:"bg-white",attrs:{filled:"",options:i.opcoesContato,label:"Selecione o método de contato",color:"teal",clearable:""},scopedSlots:i._u([{key:"option",fn:function(e){return[a("q-item",i._g(i._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:e.opt.icon}})],1),a("q-item-section",[a("q-item-label",{domProps:{innerHTML:i._s(e.opt.label)}})],1)],1)]}}],null,!1,2909180977),model:{value:i.contatoEscolhido,callback:function(e){i.contatoEscolhido=e},expression:"contatoEscolhido"}}),a("br"),"email"===i.contatoEscolhido.value?a("q-input",{staticClass:"bg-white",attrs:{filled:"",label:"E-mail *",hint:"Digite seu e-mail","lazy-rules":"",rules:[function(i){return i&&i.length>0||"Sem E-mail? Sem cookies."}]},model:{value:i.emailContato,callback:function(e){i.emailContato=e},expression:"emailContato"}}):i._e(),"telefone"===i.contatoEscolhido.value?a("q-input",{staticClass:"bg-white",attrs:{filled:"",label:"Digite seu telefone",mask:"(##) ####-####","lazy-rules":"",rules:[function(i){return i&&i.length>0||"Digite seu telefone"}]},model:{value:i.telefone,callback:function(e){i.telefone=e},expression:"telefone"}}):i._e(),"celular"===i.contatoEscolhido.value?a("q-input",{staticClass:"bg-white",attrs:{filled:"",label:"Digite seu celular",mask:"(##) #####-####","lazy-rules":"",rules:[function(i){return i&&i.length>0||"Digite seu celular"}]},model:{value:i.telefone,callback:function(e){i.telefone=e},expression:"telefone"}}):i._e(),a("br"),i.telefone||i.emailContato?a("q-btn",{staticClass:"bg-white text-primary",attrs:{label:"Gravar contato"},on:{click:function(e){i.adicionaContatoDialog=!1}}}):i._e()],1)],1)],1),a("q-expansion-item",{attrs:{icon:"perm_identity",label:"Abrangência territorial",align:"center"},model:{value:i.abrangenciaTerritorialExpandido,callback:function(e){i.abrangenciaTerritorialExpandido=e},expression:"abrangenciaTerritorialExpandido"}},[a("br"),a("q-card",[0===i.cidadesAnuncio.length?a("q-item-section",[a("q-btn",{attrs:{label:"Adicionar cidades"},on:{click:function(e){i.adicionarCidadeDialog=!0}}})],1):i._e(),i._l(this.cidadesAnuncio,(function(e){return a("q-item",{key:e.id},[0!==i.cidadesAnuncio.length?a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{icon:"close"},on:{click:i.eliminarCidade}})],1):i._e(),a("q-item-section",{attrs:{align:"left"}},[a("q-item-label",[i._v("\n                  Estado: "+i._s(e.nomeEstado)+"\n                ")]),a("q-item-label",[i._v("\n                  Região: "+i._s(e.nomeMicroRegiao)+"\n                ")]),a("q-item-label",[i._v("\n                  Cidade: "+i._s(e.nomeCidade)+"\n                ")]),a("q-item-label",[i._v("\n                  Importância: "+i._s(1===e.cidadePrincipal?"Principal":"Secundária")+"\n                ")])],1)],1)})),0!==i.cidadesAnuncio.length?a("q-btn",{attrs:{label:"Adicionar cidade"},on:{click:function(e){i.adicionarCidadeDialog=!0}}}):i._e()],2),a("br")],1),a("q-dialog",{attrs:{persistent:"",maximized:i.dialogoTelaCheia,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:i.adicionarCidadeDialog,callback:function(e){i.adicionarCidadeDialog=e},expression:"adicionarCidadeDialog"}},[a("q-card",{staticClass:"bg-primary text-white"},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[i._v("Fechar")])],1)],1),a("q-card-section",[a("div",{staticClass:"text-h4"},[i._v("Abrangência territorial")])]),a("q-card-section",[a("q-select",{staticClass:"bg-white",attrs:{filled:"",options:i.opcoesEstado,label:"Selecione o estado",clearable:""},scopedSlots:i._u([{key:"option",fn:function(e){return[a("q-item",i._g(i._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:i._s(e.opt.label)}})],1)],1)]}}],null,!1,4041510316),model:{value:i.estadoEscolhido,callback:function(e){i.estadoEscolhido=e},expression:"estadoEscolhido"}}),a("br"),0!==i.estadoEscolhido.length?a("q-select",{staticClass:"bg-white",attrs:{filled:"",options:i.opcoesMicroRegiao,label:"Selecione a região estadual",clearable:""},scopedSlots:i._u([{key:"option",fn:function(e){return[a("q-item",i._g(i._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:i._s(e.opt.label)}})],1)],1)]}}],null,!1,4041510316),model:{value:i.microRegiaoEscolhido,callback:function(e){i.microRegiaoEscolhido=e},expression:"microRegiaoEscolhido"}}):i._e(),a("br"),0!==i.microRegiaoEscolhido.length?a("q-select",{staticClass:"bg-white",attrs:{filled:"",options:i.opcoesCidade,label:"Selecione a cidade",clearable:""},scopedSlots:i._u([{key:"option",fn:function(e){return[a("q-item",i._g(i._b({},"q-item",e.itemProps,!1),e.itemEvents),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:i._s(e.opt.label)}})],1)],1)]}}],null,!1,4041510316),model:{value:i.cidadeEscolhido,callback:function(e){i.cidadeEscolhido=e},expression:"cidadeEscolhido"}}):i._e(),a("br"),0!==i.cidadeEscolhido.length?a("q-list",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{multiline:"",tag:"label"}},[a("q-item-section",[a("q-item-label",[i._v("Cidade principal de atendimento")]),a("q-item-label",{staticClass:"text-black",attrs:{caption:""}},[i._v("\n                "+i._s(!1===i.cidadePrincipal?"Não":"Sim")+"\n              ")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-toggle",{attrs:{color:"blue"},model:{value:i.cidadePrincipal,callback:function(e){i.cidadePrincipal=e},expression:"cidadePrincipal"}})],1)],1)],1):i._e(),a("br"),0!==i.estadoEscolhido.length&&0!==i.microRegiaoEscolhido.length&&0!==i.cidadeEscolhido.length?a("q-btn",{staticClass:"bg-white text-primary",attrs:{label:"Gravar cidade"},on:{click:function(e){i.adicionarCidadeDialog=!1}}}):i._e()],1)],1)],1),a("div",[a("q-btn",{attrs:{label:"Salvar",type:"submit",color:"primary"}})],1)],1):i._e()],1),i.cadastrado?i._e():a("span",[i._v("Você precisa estar logado, para criar um\n     anúncio!\n   ")])])},t=[],n=(a("7f7f"),a("bc3a")),l=a.n(n),c={data:function(){return{token:null,tituloAnuncio:null,exibirData:null,nivelPrioridade:null,descricao:null,telefone:null,emailContato:null,cidadesAnuncio:[],imagens:[],adicionaContatoDialog:!1,adicionarCidadeDialog:!1,dialogoTelaCheia:!0,contatoEscolhido:[],estadoEscolhido:[],microRegiaoEscolhido:[],cidadeEscolhido:[],cidadePrincipal:!1,opcoesContato:[{label:"Email",value:"email",icon:"mail"},{label:"Telefone",value:"telefone",icon:"phone"},{label:"Celular",value:"celular",icon:"phonelink_ring"}],opcoesEstado:[],opcoesMicroRegiao:[],opcoesCidade:[],contatoExpandido:!1,fotosAnuncioExpandido:!1,configuracoesAnuncioExpandido:!1,abrangenciaTerritorialExpandido:!1,cadastrado:!1}},created:function(){this.token=localStorage.getItem("token"),this.token&&(this.cadastrado=!0)},watch:{adicionarCidadeDialog:function(i){switch(i){case!0:this.carregarEstados();break;case!1:0!==this.estadoEscolhido.length&&0!==this.microRegiaoEscolhido.length&&0!==this.cidadeEscolhido.length&&(!0===this.cidadePrincipal?this.cidadePrincipal=1:this.cidadePrincipal=0,this.cidadesAnuncio.push({idEstado:this.estadoEscolhido.value,nomeEstado:this.estadoEscolhido.label,idMicroRegiao:this.microRegiaoEscolhido.value,nomeMicroRegiao:this.microRegiaoEscolhido.label,idCidade:this.cidadeEscolhido.value,nomeCidade:this.cidadeEscolhido.label,cidadePrincipal:this.cidadePrincipal}),this.opcoesEstado=[],this.estadoEscolhido=[],this.opcoesMicroRegiao=[],this.microRegiaoEscolhido=[],this.opcoesCidade=[],this.cidadeEscolhido=[],this.cidadePrincipal=!1);break;default:break}},estadoEscolhido:function(i){this.microRegiaoEscolhido=[],this.cidadeEscolhido=[],this.opcoesMicroRegiao=[],this.opcoesCidade=[],this.carregarMicroRegioes(i.value)},microRegiaoEscolhido:function(i){this.cidadeEscolhido=[],this.opcoesCidade=[],this.carregarCidades(this.estadoEscolhido.value,i.value)}},methods:{eliminarContato:function(){this.telefone=null,this.emailContato=null},eliminarCidade:function(i){this.cidadesAnuncio.splice(i,1)},carregarEstados:function(){var i=this;this.opcoesEstado=[],this.opcoesMicroRegiao=[],this.opcoesCidade=[],l.a.get("http://localhost:8799/api/localizaEstados/").then((function(e){var a=e.data;a.forEach((function(e){i.opcoesEstado.push({value:e.id,label:e.UF})}))})).catch((function(i){console.log(i)}))},carregarMicroRegioes:function(i){var e=this;l.a.get("http://localhost:8799/api/localizaMicroRegioes/".concat(i)).then((function(i){var a=i.data;a.forEach((function(i){e.opcoesMicroRegiao.push({value:i.id,label:i.nome})}))})).catch((function(i){console.log(i)}))},carregarCidades:function(i,e){var a=this;l.a.get("http://localhost:8799/api/localizaCidades/".concat(i,",").concat(e)).then((function(i){var e=i.data;e.forEach((function(i){a.opcoesCidade.push({value:i.id,label:i.nome})}))})).catch((function(i){console.log(i)}))},enviarAnuncio:function(){var i=this,e=null;e={token:this.token,tituloAnuncio:this.tituloAnuncio,exibirData:this.exibirData,nivelPrioridade:this.nivelPrioridade,descricao:this.descricao,cidadesAnuncio:this.cidadesAnuncio},this.telefone&&(e.telefone=this.telefone),this.emailContato&&(e.emailContato=this.emailContato),l.a.post("http://localhost:8799/api/enviarAnuncio",e).then((function(e){i.enviarImagem(e.data.idAnuncio)})).catch((function(e){i.mostrarNotificacaoErro()}))},enviarImagem:function(i){var e=this,a=i;l.a.post("http://localhost:8799/api/guardarImagem",{token:this.token,imagem:this.imagens,idAnuncio:a}).then((function(i){e.mostrarNotificacaoSucesso(),e.$router.push("/")}))},adicionarImagens:function(i){var e=this;i.forEach((function(i){e.imagens.push({base64:i.__img.src,nomeArquivo:i.name,tipo:"anuncio"})}))},removerImagem:function(i){var e=this.imagens.indexOf(i.name);this.imagens.splice(e,1)},mostrarNotificacaoSucesso:function(){this.$q.notify({color:"green",message:"O anúncio foi criado com sucesso!"})},mostrarNotificacaoErro:function(){this.$q.notify({color:"red",message:"Erro durante a criação do anúncio."})}}},s=c,r=a("2877"),d=Object(r["a"])(s,o,t,!1,null,null,null);e["default"]=d.exports}}]);